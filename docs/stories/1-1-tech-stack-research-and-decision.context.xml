<story-context id="bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1.1</storyId>
    <title>技术选型调研与决策</title>
    <status>drafted</status>
    <generatedAt>2025-12-15</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/1-1-tech-stack-research-and-decision.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>技术负责人</asA>
    <iWant>评估并选择最适合AINative项目的静态站点生成器</iWant>
    <soThat>后续开发有坚实的技术基础</soThat>
    <tasks>
      <task id="1" ac="1,2">
        <description>调研VuePress方案</description>
        <subtasks>
          <subtask id="1.1">调研VuePress 2核心特性（Vue 3、Vite、插件生态）</subtask>
          <subtask id="1.2">评估reveal.js集成方案（vuepress-plugin-revealjs）</subtask>
          <subtask id="1.3">验证GitHub Pages部署兼容性</subtask>
          <subtask id="1.4">评估中文文档支持与社区活跃度</subtask>
          <subtask id="1.5">测试响应式默认主题表现</subtask>
        </subtasks>
      </task>
      <task id="2" ac="1,2">
        <description>调研Docusaurus方案</description>
        <subtasks>
          <subtask id="2.1">调研Docusaurus核心特性（React、MDX、插件）</subtask>
          <subtask id="2.2">评估reveal.js集成方案（自定义或MDX组件）</subtask>
          <subtask id="2.3">验证GitHub Pages部署兼容性</subtask>
          <subtask id="2.4">评估中文文档支持与国际化能力</subtask>
          <subtask id="2.5">测试响应式默认主题表现</subtask>
        </subtasks>
      </task>
      <task id="3" ac="1,2">
        <description>调研自定义方案（Vite + Vue 3）</description>
        <subtasks>
          <subtask id="3.1">调研Vite + Vue 3 + markdown-it技术栈</subtask>
          <subtask id="3.2">评估reveal.js集成难度（原生集成）</subtask>
          <subtask id="3.3">评估开发成本与维护成本</subtask>
          <subtask id="3.4">验证构建产物是否纯静态</subtask>
          <subtask id="3.5">评估可定制性与灵活性</subtask>
        </subtasks>
      </task>
      <task id="4" ac="1,3,4">
        <description>综合对比与风险评估</description>
        <subtasks>
          <subtask id="4.1">创建功能对比矩阵（Document模式、PPT模式、SEO、性能）</subtask>
          <subtask id="4.2">评估学习曲线与团队技能匹配度</subtask>
          <subtask id="4.3">分析社区支持与长期维护性</subtask>
          <subtask id="4.4">识别技术风险（兼容性、性能、扩展性）</subtask>
          <subtask id="4.5">评估预算与时间成本</subtask>
        </subtasks>
      </task>
      <task id="5" ac="3,4">
        <description>输出决策文档</description>
        <subtasks>
          <subtask id="5.1">编写技术选型决策文档（docs/tech-stack-decision.md）</subtask>
          <subtask id="5.2">包含推荐方案及理由</subtask>
          <subtask id="5.3">列出技术风险与缓解措施</subtask>
          <subtask id="5.4">提供实施建议与后续步骤</subtask>
          <subtask id="5.5">获得团队审阅与确认</subtask>
        </subtasks>
      </task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="1">
      <description>3个方案的对比分析（功能、生态、学习曲线、社区支持）</description>
      <source>docs/epics.md - Story 1.1</source>
    </criterion>
    <criterion id="2">
      <description>reveal.js集成可行性评估</description>
      <source>docs/epics.md - Story 1.1</source>
    </criterion>
    <criterion id="3">
      <description>最终推荐方案及理由</description>
      <source>docs/epics.md - Story 1.1</source>
    </criterion>
    <criterion id="4">
      <description>技术风险评估</description>
      <source>docs/epics.md - Story 1.1</source>
    </criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Technology Stack Details</section>
        <snippet>VuePress 2 + Vite 已被选定作为核心框架，使用 vuepress-plugin-md-enhance (presentation) 支持 reveal.js PPT 模式。Node 18.x LTS，pnpm 8.x，部署到 GitHub Pages（base: /AINative/）。</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Decision Summary</section>
        <snippet>框架决策: VuePress 2.0.0-rc.26 + Vite bundler + TypeScript；PPT模式: vuepress-plugin-md-enhance 2.0.0-rc.99；部署: GitHub Pages with GitHub Actions CI/CD。</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture</title>
        <section>Project Structure</section>
        <snippet>目录结构包含 docs/ 目录，其中有 .vuepress/config.ts 配置文件、.vuepress/styles/ 样式目录、.vuepress/public/images/ 图片资源，以及 slides/ PPT内容目录。</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>AINative - Epic与Story分解</title>
        <section>Epic 1: 项目基础设施与技术栈 - Story 1.1</section>
        <snippet>技术选型调研与决策：评估VuePress、Docusaurus、自定义方案的优劣势，重点评估reveal.js集成难度，考虑构建产物是否纯静态、中文文档支持和配置灵活性。输出技术选型决策文档。</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>AINative - Product Requirements Document</title>
        <section>Project Classification - Technical Type</section>
        <snippet>静态文档网站（Documentation Site），纯文档型静态页面应用，不是应用型应用。部署方式：GitHub Pages原生支持，推送即可访问，零部署。双模式呈现：Document模式（标准文档交互）+ PPT模式（基于reveal.js）。</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>AINative - Product Requirements Document</title>
        <section>FR-5: 静态站点基础设施</section>
        <snippet>技术选型：方案A（推荐）VuePress，方案B（备选）Docusaurus，方案C（自定义）Vite + Vue 3。构建输出：纯静态文件（HTML/CSS/JS），无服务端依赖。验收标准：构建成功，所有页面可访问，资源加载正常。</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>AINative - Product Requirements Document</title>
        <section>Non-Functional Requirements - Performance</section>
        <snippet>首页加载 < 2秒（3G网络），Lighthouse Performance > 90分，图片单张 < 200KB，JavaScript bundle < 300KB（gzip后），CSS bundle < 100KB（gzip后）。</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>AINative - Product Requirements Document</title>
        <section>创新模式分析 - 双模式文档网站</section>
        <snippet>市场现状：VuePress/Docusaurus/GitBook专注文档，Slidev/reveal.js专注演示。AINative创新：同一套内容源（Markdown）生成两种形式，Document ↔ PPT 无缝切换，场景适配（团队分享用PPT，个人学习用Document）。</snippet>
      </doc>
    </docs>
    <code>
      <!-- 项目尚未开始实施，无现有代码 -->
    </code>
    <dependencies>
      <!-- 项目尚未初始化，无依赖信息。预期依赖见架构文档 -->
      <expected>
        <node>
          <vuepress>2.0.0-rc.26</vuepress>
          <vuepress-plugin-md-enhance>2.0.0-rc.99</vuepress-plugin-md-enhance>
          <vue>^3.x</vue>
          <vite>^5.x</vite>
        </node>
      </expected>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="architecture">
      <description>静态站点生成器必须支持纯静态构建输出（无服务端依赖），适配GitHub Pages部署</description>
      <source>docs/architecture.md, docs/PRD.md</source>
    </constraint>
    <constraint type="architecture">
      <description>必须支持双模式：Document模式（3级侧边栏导航、Markdown渲染）+ PPT模式（reveal.js集成）</description>
      <source>docs/architecture.md</source>
    </constraint>
    <constraint type="performance">
      <description>首屏加载 < 2秒（3G网络），Lighthouse Performance > 90分</description>
      <source>docs/architecture.md, docs/PRD.md</source>
    </constraint>
    <constraint type="technology">
      <description>Node 18.x LTS，推荐使用 pnpm 8.x 作为包管理器</description>
      <source>docs/architecture.md</source>
    </constraint>
    <constraint type="deployment">
      <description>GitHub Pages部署，base路径配置为 /AINative/，GitHub Actions自动构建</description>
      <source>docs/architecture.md</source>
    </constraint>
    <constraint type="naming">
      <description>文件/目录/图片统一使用 kebab-case 命名（如 ai-native-intro, core-hook.png）</description>
      <source>docs/architecture.md - Consistency Rules</source>
    </constraint>
    <constraint type="structure">
      <description>项目结构：docs/ 为内容根目录，docs/.vuepress/ 为配置目录，docs/slides/ 为PPT内容</description>
      <source>docs/architecture.md - Project Structure</source>
    </constraint>
  </constraints>

  <interfaces>
    <interface>
      <name>VuePress Config API</name>
      <kind>Configuration File</kind>
      <signature>docs/.vuepress/config.ts - 导出 defineUserConfig() 配置对象，包含 base, head, plugins, sidebar 等</signature>
      <path>docs/.vuepress/config.ts</path>
      <note>尚未创建，技术选型后需要根据最终方案定义</note>
    </interface>
    <interface>
      <name>reveal.js Plugin Integration</name>
      <kind>Plugin Configuration</kind>
      <signature>plugins: [['md-enhance', { presentation: true }]] - 在 config.ts 中配置</signature>
      <path>docs/.vuepress/config.ts</path>
      <note>需要在选定VuePress方案后配置</note>
    </interface>
    <interface>
      <name>GitHub Actions Workflow</name>
      <kind>CI/CD Configuration</kind>
      <signature>.github/workflows/deploy.yml - setup-node, pnpm install, pnpm build, gh-pages deploy</signature>
      <path>.github/workflows/deploy.yml</path>
      <note>技术选型后需要创建，使用 Node 18, pnpm 8.x</note>
    </interface>
  </interfaces>

  <tests>
    <standards>
      <para>技术选型阶段的验证标准：</para>
      <para>1. 功能验证：每个候选方案需要创建简单原型（hello world级别），验证Document模式和PPT模式可行性</para>
      <para>2. 性能验证：使用Lighthouse评估构建产物的性能指标（Performance, Best Practices, SEO），目标 > 90分</para>
      <para>3. 兼容性验证：在Chrome、Firefox、Safari桌面端和iOS Safari、Android Chrome移动端测试基本功能</para>
      <para>4. 集成验证：验证reveal.js插件集成难度和效果，确保PPT模式流畅运行</para>
      <para>5. 部署验证：验证GitHub Pages部署流程，确保base路径配置正确</para>
    </standards>
    <locations>
      <!-- 技术选型阶段无正式测试代码，使用临时原型验证 -->
      <location>临时原型目录（技术选型后移除）</location>
    </locations>
    <ideas>
      <idea ac="1">
        <description>创建VuePress、Docusaurus、Vite+Vue3三个简单原型，每个包含基础Document页面和一个简单的reveal.js PPT页面</description>
      </idea>
      <idea ac="2">
        <description>在每个原型中实际集成reveal.js，评估集成难度和效果（配置复杂度、功能完整性、样式定制灵活性）</description>
      </idea>
      <idea ac="3">
        <description>使用功能对比矩阵验证最终推荐方案，确保所有关键需求（双模式、GitHub Pages、性能、SEO）都能满足</description>
      </idea>
      <idea ac="4">
        <description>识别并记录技术风险（学习曲线、社区支持、长期维护），提供缓解措施</description>
      </idea>
      <idea ac="all">
        <description>输出决策文档后进行团队评审，确保所有技术关键决策点都已覆盖</description>
      </idea>
    </ideas>
  </tests>
</story-context>

<story-context id="3-a-5-doc-mode-interaction-design" v="1.1">
  <metadata>
    <epicId>3-A</epicId>
    <storyId>3-a-5</storyId>
    <title>文档模式交互页面设计</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-12-16</generatedAt>
    <generator>BMad Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/3-a-5-doc-mode-interaction-design.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>前端开发者</asA>
    <iWant>设计并实现文档模式的交互与视觉布局（深度复刻 Linear Docs 风格）</iWant>
    <soThat>用户获得“专业级”、“高精度”的沉浸式阅读体验，并能便捷地切换到 PPT 演示模式</soThat>
    <tasks>
      - Task 1: 布局重构与 Linear 主题变量定义 (AC: #1, #2)
      - Task 2: 侧边栏 (Sidebar) 深度定制 (AC: #1)
      - Task 3: 内容区排版优化 (AC: #2)
      - Task 4: 右侧 TOC 与交互实现 (AC: #1, #3)
      - Task 5: 响应式适配 (AC: #3)
    </tasks>
  </story>

  <acceptanceCriteria>
    1. ✅ 像素级布局复刻: Sidebar 260px (bg #0F1115), Content max 768px, TOC 240px, Sticky Header 56px.
    2. ✅ Linear 级排版: Inter Variable 字体，正文 15px / 1.6，标题 H1 32px / 600 weight.
    3. ✅ 极简色彩系统: 背景色 #0B0D11，文字 #D0D6E0 (Primary) / #8A8F98 (Secondary)，边框 rgba(255,255,255,0.06).
    4. ✅ 交互细节: Sidebar Item 高度 32px，Hover 0.1s 瞬时响应，无拖沓动画。
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>UX 设计规范</title>
        <section>1. 视觉设计基础</section>
        <snippet>设计主题：科技先锋 (Tech Pioneer)。更新：以 Story 3-A.5 中的 Deep Research 参数为准。</snippet>
      </doc>
      <doc>
        <path>docs/stories/3-a-5-doc-mode-interaction-design.md</path>
        <title>Story 3-A.5: 文档模式交互页面设计</title>
        <section>Dev Notes - Deep Research</section>
        <snippet>包含 Sidebar 宽度、Header 高度、具体色值 (#0B0D11) 和排版参数 (15px body) 的详细规范。</snippet>
      </doc>
      <doc>
        <path>docs/stories/3-a-4-ppt-mode-interaction-design.md</path>
        <title>Story 3-A.4: PPT模式交互页面设计</title>
        <section>Dev Notes</section>
        <snippet>Learnings: Visual Consistency (使用 index.scss 变量), Glassmorphism (玻璃拟态控制按钮), Responsive Check.</snippet>
      </doc>
    </docs>
    <code>
      <item>
        <path>docs/.vuepress/config.ts</path>
        <kind>config</kind>
        <symbol>theme</symbol>
        <lines>18-30</lines>
        <reason>需在此配置 sidebar 和 themeConfig。</reason>
      </item>
      <item>
        <path>docs/.vuepress/styles/index.scss</path>
        <kind>style</kind>
        <symbol>root variables</symbol>
        <reason>定义全局 CSS 变量，需确保文档模式样式与 PPT 模式样式（如背景色）一致。</reason>
      </item>
      <item>
        <path>docs/.vuepress/components/PresentationEntry.vue</path>
        <kind>component</kind>
        <symbol>PresentationEntry</symbol>
        <reason>已实现的文档 -> PPT 入口组件。</reason>
      </item>
    </code>
    <dependencies>
      <pkg>vuepress</pkg>
      <pkg>sass-embedded</pkg>
      <pkg>@vuepress/theme-default</pkg>
    </dependencies>
  </artifacts>

  <constraints>
    - **Deep Research Compliance**: 必须严格执行 Story 中的 Deep Research 参数（15px 正文，260px 侧边栏等）。
    - **Style Isolation**: `doc-mode.scss` 必须严格作用域化（Scope protection）。
    - **Responsive**: Mobile (< 768px) 隐藏 Sidebar 和 TOC，使用 Drawer。
  </constraints>

  <interfaces>
    <api>
      <name>PresentationEntry</name>
      <kind>Vue Component</kind>
      <signature>&lt;PresentationEntry /&gt;</signature>
      <path>docs/.vuepress/components/PresentationEntry.vue</path>
    </api>
  </interfaces>

  <tests>
    <standards>手动验证为主。使用 Chrome DevTools 检查 Computed Style 是否匹配 Deep Research 规范。</standards>
    <locations>docs/.vuepress/styles/*.scss</locations>
    <ideas>
      <test>测量 Sidebar 宽度是否精确为 260px</test>
      <test>检查正文字体大小是否为 15px (computed value)</test>
      <test>验证 Sticky Header 高度 56px 和模糊效果</test>
    </ideas>
  </tests>
</story-context>